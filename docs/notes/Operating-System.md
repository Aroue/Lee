# 操作系统

## 一、操作系统基本特征

### 1. 并发（Concurrence）

系统中的程序能够并发执行这一特征，使得 OS 能有效地提高系统中资源的利用率，增加系统的吞吐量。

#### 1.1  并发与并行

并行性：指两个或者多个事件在`同一时刻`发生

并发性：指两个或多个事件在`同一时间间隔内`发生

#### 1.2  引入进程



### 2. 共享（Sharing）



#### 2.1  互斥共享方式





#### 2.2  互斥共享方式



### 3. 虚拟



#### 3.1  时分复用技术



#### 3.2  空分复用技术



## 二、进程与线程
### 1.  进程与线程

#### 1)  进程的概念

进程是指一个具有`独立功能`的程序在一个`数据集合`上的一次`动态执行`过程。



进程是资源分配的基本单位。



PCB：进程控制快（Process Control Block，PCB）是系统用来描述进程的基本情况和活动过程，进而控制和管理进程。

程序段、相关数据段和 PCB 三部分构成进程实体，简称进程。对进程的操作实质上是对 PCB 的操作。

#### 2)  线程的概念

线程是独立调度和分派的基本单位。



一个进程中可以有多个线程，它们共享该进程中的全部系统资源。

同一进程或不同进程的中的多个线程可以并发执行。

#### 3)   线程与进程的比较

1⃣️  拥有资源

进程是资源分配的基本单位，但是线程本身不拥有系统资源，但是可以共享该进程所拥有的资源。

2⃣️  调度

线程是调度的基本单位，同一进程中线程的切换不会引起进程的切换，非同一个进程中的线程之间切换会引起进程的切换。

3⃣️  独立性

同一进程中的线程之间的独立性 <<  不同进程之间的独立性

4⃣️  系统开销

进程的创建或撤消时，系统都要为之分配或回收进程控制块、分配或回收它的资源（内存空间、I/O设备），所付出的开销远远大于创建或撤消线程的开销；在进程切换时，涉及进程上下文的切换，而线程的切换代价远远小于进程的切换。

#### 4)  进程状态的切换

进程的三种基本状态：

就绪：进程已经处于准备运行的状态，即进程已经分配到处 CPU 之外的所有必要资源，再获得 CPU 之后便可以执行。

执行：进程已获得 CPU ，其程序处于执行状态。

堵塞：是指正在运行的进程由于发生某事件 (I/O请求、申请缓冲区失败等) 暂时无法继续执行时的状态，即进程的执行受到阻塞。

此外还有创建创建状态和终止状态



⚠️只有就绪状态能转化为执行状态



![进程状态转换图](/Users/klee/Documents/Lee/docs/_media/images/status-change.png)

### 2.  调度算法

## 三、死锁

#### 1.  死锁定义

如果一组进程中的每一个进程都在等待仅由该组进程中的其他进程才能引发的事件，那么该组进程就是死锁 (Deadlock) 的。

#### 2.  产生死锁的必要条件

- 互斥：每个资源要么已经分配给了一个进程，要么就是可用的。
- 占有和等待：已经得到了某个资源的进程可以再请求新的资源。
- 不可抢占：已经分配给一个进程的资源不能强制性地被抢占，它只能被占有它的进程显式地释放。
- 环路等待：有两个或者两个以上的进程组成一条环路，该环路中的每个进程都在等待下一个进程所占有的资源。